variables:
  GIT_SUBMODULE_STRATEGY: recursive

before_script:
  - apt-get update
  - apt-get install -y git
  - apt-get install -y python3 python3-pip
  - pip3 install mkdocs mkdocs-material
  
build:
  script:
    - find . -type f -name "*.md" -print0 | while read -d $'\0' file
      do
        pandoc "$file" -s -o "${file%.md}.html"
      done
    - mkdocs build --clean
  artifacts:
    paths:
      - /

pages:
  stage: deploy
  script:
  - mkdir .public
  - cp -r * .public
  - mv .public public
  artifacts:
    paths:
    - public
  only:
  - main
